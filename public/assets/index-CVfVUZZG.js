import{_ as N,s as V,c as d,l as s,j as u,a as r,t as _,i as w,w as k,B as D,b as S,r as v,e as p,u as B,o as x,v as j,x as E,h as o,k as I}from"./index-C9fJEsZT.js";import{C as O,a as q,L as A,P as U}from"./fullPreview-x0NiP8ix.js";import{e as T}from"./emitter-E5P-NQ8u.js";import{u as b}from"./edit-qsBnRrk0.js";import{l as z}from"./lemon-D5W0kMi6.js";import"./ToolOutlined-CEDchPG2.js";import"./index-DLYT0z4s.js";import"./marked.esm-BktMfnUh.js";import"./auth-CBthU2VU.js";import"./http-B5vhwVWP.js";import"./user-MVXz8V5n.js";import"./index-TjCxX7sJ.js";const G={__name:"index",setup(a,{expose:l}){l();const i=S(),e=b(),c=v(!1),f=p(()=>e.chat),h=p(()=>e.messages),m=p(()=>{var t;return(t=e.list.find(M=>M.conversation_id==i.params.id))==null?void 0:t.status}),{t:P}=B(),R=()=>{c.value=!c.value};let n;const y=async()=>{n=i.params.id,e.playback(n,500)},H=()=>{T.emit("fullPreviewVisable-close"),e.playback(n,500)},L=()=>{e.toResult()},g=v(!1);x(()=>{y();const t=document.querySelector(".chat-messages");if(!t)return!1;t.addEventListener("scroll",()=>{t.scrollHeight-t.scrollTop-t.clientHeight>200?g.value=!0:g.value=!1})});const C={route:i,chatStore:e,isCollapsed:c,currentChat:f,messages:h,playStatus:m,t:P,toggleCollapse:R,get conversationId(){return n},set conversationId(t){n=t},init:y,handleRestart:H,toResult:L,isShowScrollToBottom:g,scrollToBottom:()=>{const t=document.querySelector(".chat-messages");if(!t)return!1;t.scrollTop=t.scrollHeight-t.clientHeight},ref:v,onMounted:x,onUnmounted:E,watch:j,computed:p,Preview:U,LocalPreview:A,ChatHeader:q,ChatMessages:O,get emitter(){return T},get useRoute(){return S},get useChatStore(){return b},get useI18n(){return B}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}},J={class:"lemon-container"},F={class:"lemon-content"},K={class:"lemon-main"},Q={class:"lemon-footer"},W={style:{display:"flex","align-items":"center"}},X={style:{color:"#34322d","font-size":".875rem","line-height":"1.25rem"}},Y={key:0},Z={key:1};function $(a,l,i,e,c,f){const h=V("Down"),m=D;return o(),d("div",J,[s("div",F,[u(" 主页面 "),s("div",K,[r(e.ChatHeader,{title:e.currentChat.title},null,8,["title"]),r(e.ChatMessages,{messages:e.messages},null,8,["messages"]),e.isShowScrollToBottom?(o(),d("div",{key:0,class:"scroll-to-bottom",onClick:e.scrollToBottom},[r(h)])):u("v-if",!0),s("div",Q,[s("div",W,[l[0]||(l[0]=s("div",null,[s("img",{style:{width:"20px",height:"20px","margin-right":"5px"},src:z,alt:""})],-1)),s("span",X,[e.playStatus!="running"?(o(),d("div",Y,"LemonAI"+_(a.$t("task_finished")),1)):(o(),d("div",Z,"LemonAI"+_(a.$t("task_playing"))+"...",1))])]),s("div",null,[e.playStatus!="running"?(o(),w(m,{key:0,type:"primary",onClick:e.handleRestart},{default:k(()=>[I(_(a.$t("replay")),1)]),_:1})):(o(),w(m,{key:1,type:"primary",onClick:e.toResult},{default:k(()=>[I(_(a.$t("jump_to_result")),1)]),_:1}))])])]),u(" 实时预览文件"),r(e.Preview,{class:"preview"}),u("本地预览文件"),r(e.LocalPreview,{class:"preview"})])])}const _e=N(G,[["render",$],["__scopeId","data-v-0c4481a5"],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/view/share/index.vue"]]);export{_e as default};
