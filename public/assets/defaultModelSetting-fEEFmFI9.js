import{_ as L,c as B,h as N,a as d,w as v,F as E,Y as X,i as j,au as te,a5 as ne,k as oe,t as C,a4 as ae,u as O,e as w,r as _,v as k,P as $,j as o,l as M,U as G,V as le,ab as q,a8 as se,av as W,X as F,Q as I,g as J,aw as Y,o as z,x as H,a9 as A}from"./index-COUhflQL.js";import{e as b}from"./emitter-E5P-NQ8u.js";import{s as y}from"./default-model-setting-BBEOO4VJ.js";import{A as K}from"./driver-BxHdV7Lz.js";import{S as ie}from"./SettingOutlined-CvCWWhoi.js";import"./http-B5vhwVWP.js";const de={__name:"selectModel",props:{platform_models:{type:Array,default:()=>[]},model_choose:{type:Number,default:()=>0},select_type:{type:String,default:()=>"assistant"}},setup(t,{expose:n}){n();const{t:c}=O(),e=t,r=w(()=>Array.isArray(e.platform_models)&&e.platform_models.length>0),u=_(r.value?e.model_choose:null);k(()=>e.model_choose,l=>{r.value&&(u.value=l)});const a=w(()=>{const l=[];if(r.value)for(const s of e.platform_models){let i=l.find(f=>f.name===s.platform_name);i||(i={name:s.platform_name,models:[]},l.push(i)),i.models.push({id:s.id,model_name:s.model_name,group_name:s.group_name,model_id:s.model_id})}return l});k(u,async l=>{l&&b.emit("default-model-changed",{setting_type:e.select_type,model_id:Number(l)})});const m={t:c,props:e,hasModels:r,selectedModel:u,groupedModels:a,ref:_,computed:w,watch:k,get emitter(){return b},get useI18n(){return O}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},re={class:"select-model"};function ce(t,n,c,e,r,u){const a=ne,m=te,l=ae;return N(),B("div",re,[d(l,{value:e.selectedModel,"onUpdate:value":n[0]||(n[0]=s=>e.selectedModel=s),style:{width:"97%"},placeholder:e.t("setting.defaultModel.emptymodelTips"),disabled:!e.hasModels,class:"select_model_ed"},{default:v(()=>[(N(!0),B(E,null,X(e.groupedModels,s=>(N(),j(m,{key:s.name,label:s.name},{default:v(()=>[(N(!0),B(E,null,X(s.models,i=>(N(),j(a,{key:i.id,value:i.name},{default:v(()=>[oe(C(i.model_name)+" | "+C(i.group_name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["value","placeholder","disabled"])])}const me=L(de,[["render",ce],["__scopeId","data-v-1ee13d8a"],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/components/defaultModel/selectModel.vue"]]),ue={__name:"assistantSetting",props:{modelValue:{type:Object,required:!0}},setup(t,{expose:n}){var g;const{t:c}=O(),e=t,r=_(!1),u=_(!1),a={assistant_name:null,prompt:null,temperature:1,top_p:1,max_tokens:5,enable_length_limit:!1},m=((g=e.modelValue)==null?void 0:g.config)||{},l=I({...a,...m});k(()=>e.modelValue,P=>{if(P&&P.config){const R=P.config;for(const x in a)l[x]=R.hasOwnProperty(x)?R[x]:a[x]}},{deep:!0,immediate:!0});const s=()=>{r.value=!0},i=()=>{u.value=!0,b.emit("default-assistant-setting-save",l),setTimeout(()=>{r.value=!1,u.value=!1},300)},f=()=>{r.value=!1};n({showModal:s});const h={t:c,props:e,visible:r,confirmLoading:u,defaultConfig:a,initialConfig:m,config:l,showModal:s,handleOk:i,handleCancel:f,ref:_,reactive:I,watch:k,get useI18n(){return O},get emitter(){return b}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}};function _e(t,n,c,e,r,u){const a=le,m=G,l=q,s=se,i=W,f=$,h=F;return N(),j(h,{open:e.visible,"onUpdate:open":n[6]||(n[6]=g=>e.visible=g),class:"assistant-setting-modal",title:t.$t("setting.defaultModel.assistantSettings"),onOk:e.handleOk,onCancel:e.handleCancel,confirmLoading:e.confirmLoading,okButtonProps:{disabled:!1},okText:t.$t("setting.defaultModel.confirm"),cancelText:t.$t("setting.defaultModel.cancel"),centered:!0},{default:v(()=>[d(f,{class:"assistant-setting-form",layout:"vertical"},{default:v(()=>[o(" 助手名称 "),d(m,{label:t.$t("setting.defaultModel.assistantName")},{default:v(()=>[d(a,{value:e.config.assistant_name,"onUpdate:value":n[0]||(n[0]=g=>e.config.assistant_name=g),placeholder:t.$t("setting.defaultModel.assistantNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(" Prompt "),d(m,{label:t.$t("setting.defaultModel.prompt")},{default:v(()=>[d(l,{value:e.config.prompt,"onUpdate:value":n[1]||(n[1]=g=>e.config.prompt=g),rows:4,placeholder:t.$t("setting.defaultModel.promptPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(" 模型参数标题 "),M("p",null,C(t.$t("setting.defaultModel.modelParameters")),1),o(" Temperature "),d(m,{label:t.$t("setting.defaultModel.temperature")},{default:v(()=>[d(s,{value:e.config.temperature,"onUpdate:value":n[2]||(n[2]=g=>e.config.temperature=g),min:0,max:1,step:.01,marks:{0:"0",.5:"0.5",1:"1"},style:{width:"90%"}},null,8,["value"])]),_:1},8,["label"]),o(" Top P "),d(m,{label:t.$t("setting.defaultModel.topP")},{default:v(()=>[d(s,{value:e.config.top_p,"onUpdate:value":n[3]||(n[3]=g=>e.config.top_p=g),min:0,max:1,step:.01,marks:{0:"0",.5:"0.5",1:"1"},style:{width:"90%"}},null,8,["value"])]),_:1},8,["label"]),o(" Max Tokens "),d(m,{label:t.$t("setting.defaultModel.maxTokens")},{default:v(()=>[d(s,{value:e.config.max_tokens,"onUpdate:value":n[4]||(n[4]=g=>e.config.max_tokens=g),min:1,max:20,step:1,marks:{1:"1",5:"5",10:"10",15:"15",20:"20"},style:{width:"90%"}},null,8,["value"])]),_:1},8,["label"]),o(" Enable Length Limit "),d(m,{label:t.$t("setting.defaultModel.enableLengthLimit")},{default:v(()=>[d(i,{checked:e.config.enable_length_limit,"onUpdate:checked":n[5]||(n[5]=g=>e.config.enable_length_limit=g)},null,8,["checked"])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title","confirmLoading","okText","cancelText"])}const fe=L(ue,[["render",_e],["__scopeId","data-v-20e79c3b"],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/components/defaultModel/assistantSetting.vue"]]),pe={__name:"TopicNaming",props:{modelValue:{type:Object,required:!0}},setup(t,{expose:n}){const{t:c}=O(),e=t,r=_(!1),u=_(!1),a=I({config:{prompt:"",auto_naming:!1},originalConfig:null}),m=w(()=>a.originalConfig?JSON.stringify(a.config)!==JSON.stringify(a.originalConfig):!1);k(()=>e.modelValue,h=>{h&&h.config&&(Object.assign(a.config,h.config),a.originalConfig=JSON.parse(JSON.stringify(h.config)))},{deep:!0});const l=()=>{r.value=!0},s=()=>{u.value=!0,b.emit("default-topic_naming-setting-save",a.config),setTimeout(()=>{r.value=!1,u.value=!1},1e3)},i=()=>{r.value=!1};n({showModal:l});const f={t:c,props:e,visible:r,confirmLoading:u,formState:a,hasChanges:m,showModal:l,handleOk:s,handleCancel:i,ref:_,reactive:I,watch:k,computed:w,get useI18n(){return O},get message(){return J},get emitter(){return b}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}};function ge(t,n,c,e,r,u){const a=W,m=G,l=q,s=$,i=F;return N(),j(i,{class:"topic-naming",open:e.visible,"onUpdate:open":n[2]||(n[2]=f=>e.visible=f),title:t.$t("setting.defaultModel.topicNamingSettings"),onOk:e.handleOk,onCancel:e.handleCancel,confirmLoading:e.confirmLoading,okButtonProps:{disabled:!1},centered:!0,okText:t.$t("setting.defaultModel.confirm"),cancelText:t.$t("setting.defaultModel.cancel")},{default:v(()=>[d(s,{model:e.formState,layout:"vertical"},{default:v(()=>[d(m,{label:t.$t("setting.defaultModel.topicAutoNaming")},{default:v(()=>[d(a,{checked:e.formState.config.auto_naming,"onUpdate:checked":n[0]||(n[0]=f=>e.formState.config.auto_naming=f)},null,8,["checked"])]),_:1},8,["label"]),d(m,{label:t.$t("setting.defaultModel.topicNamingPrompt")},{default:v(()=>[d(l,{value:e.formState.config.prompt,"onUpdate:value":n[1]||(n[1]=f=>e.formState.config.prompt=f),rows:4,placeholder:t.$t("setting.defaultModel.promptPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["open","title","confirmLoading","okText","cancelText"])}const ve=L(pe,[["render",ge],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/components/defaultModel/TopicNaming.vue"]]),he={__name:"translation",props:{modelValue:{type:Object,required:!0}},setup(t,{expose:n}){const{t:c}=O(),e=t,r=_(!1),u=_(!1),a=I({config:{prompt:""},originalConfig:null}),m=w(()=>a.originalConfig?JSON.stringify(a.config)!==JSON.stringify(a.originalConfig):!1);k(()=>e.modelValue,h=>{h&&h.config&&(Object.assign(a.config,h.config),a.originalConfig=JSON.parse(JSON.stringify(h.config)))},{deep:!0});const l=()=>{r.value=!0},s=()=>{u.value=!0,b.emit("default-translation-setting-save",a.config),setTimeout(()=>{r.value=!1,u.value=!1},1e3)},i=()=>{r.value=!1};n({showModal:l});const f={t:c,props:e,visible:r,confirmLoading:u,formState:a,hasChanges:m,showModal:l,handleOk:s,handleCancel:i,ref:_,reactive:I,watch:k,computed:w,get useI18n(){return O},get emitter(){return b}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}};function Me(t,n,c,e,r,u){const a=q,m=G,l=$,s=F;return N(),j(s,{open:e.visible,"onUpdate:open":n[1]||(n[1]=i=>e.visible=i),title:t.$t("setting.defaultModel.translationSettings"),onOk:e.handleOk,onCancel:e.handleCancel,confirmLoading:e.confirmLoading,okButtonProps:{disabled:!1},centered:!0,okText:t.$t("setting.defaultModel.confirm"),cancelText:t.$t("setting.defaultModel.cancel")},{default:v(()=>[d(l,{model:e.formState,layout:"vertical"},{default:v(()=>[d(m,{label:t.$t("setting.defaultModel.translationPrompt")},{default:v(()=>[d(a,{value:e.formState.config.prompt,"onUpdate:value":n[0]||(n[0]=i=>e.formState.config.prompt=i),rows:4,placeholder:t.$t("setting.defaultModel.promptPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["open","title","confirmLoading","okText","cancelText"])}const be=L(he,[["render",Me],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/components/defaultModel/translation.vue"]]),Se={__name:"index",setup(t,{expose:n}){n();const{t:c}=O(),e=_([]),r=_(0),u=_(0),a=_(0),m=_(0),l=_({setting_type:"assistant",config:{assistant_name:null,prompt:null,temperature:1,top_p:1,max_tokens:5,enable_length_limit:!1},model_id:0}),s=_({setting_type:"topic-naming",config:{auto_naming:!1,prompt:""},model_id:0}),i=_({setting_type:"translation",config:{prompt:""},model_id:0}),f=_({setting_type:"browser-use",config:{},model_id:0}),h=_(),g=_(),P=_(),R=()=>{h.value.showModal()},x=()=>{g.value.showModal()},Z=()=>{P.value.showModal()},ee=()=>{};Y(async()=>{const S=await y.getModels();e.value=S,(await y.getModelBySetting()).forEach(p=>{p.setting_type==="assistant"&&(l.value=p,r.value=p.model_id),p.setting_type==="topic-naming"&&(s.value=p,u.value=p.model_id),p.setting_type==="translation"&&(i.value=p,a.value=p.model_id),p.setting_type==="browser-use"&&(f.value=p,m.value=p.model_id)})});let U=null;const V=async()=>{U=K({animate:!0,showProgress:!0,prevBtnText:c("setting.prevStep"),nextBtnText:c("setting.nextStep"),doneBtnText:c("setting.doneStep"),steps:[{element:".assistant-container",popover:{side:"bottom",title:c("setting.defaultModel.defaultAssistantModel"),description:c("setting.defaultModel.assistantModelTips"),onNextClick:async()=>{A(()=>{U.moveNext()})}}},{element:".topic-naming-contianer",popover:{side:"bottom",title:c("setting.defaultModel.topicNamingModel"),description:c("setting.defaultModel.topicNamingModelTips"),onNextClick:async()=>{A(()=>{localStorage.setItem("tour_end","true"),localStorage.setItem("tour","false"),U.moveNext()})}}}]}),U.drive()};z(async()=>{localStorage.getItem("tour")==="true"&&localStorage.getItem("tour_end")!=="true"&&V(),b.on("default-assistant-setting-save",S=>{l.value.config=S,console.log(l.value),y.updateModel(l.value).then(T=>{J.success(c("setting.defaultModel.saveSuccess"))})}),b.on("default-topic_naming-setting-save",S=>{s.value.config=S,y.updateModel(s.value).then(T=>{J.success(c("setting.defaultModel.saveSuccess"))})}),b.on("default-translation-setting-save",S=>{i.value.config=S,y.updateModel(i.value).then(T=>{J.success(c("setting.defaultModel.saveSuccess"))})}),b.on("default-model-changed",S=>{const T=S.setting_type,p=S.model_id;T==="assistant"?(r.value=p,l.value.model_id=p,y.updateModel(l.value).then(D=>{})):T==="topic-naming"?(u.value=p,s.value.model_id=p,y.updateModel(s.value).then(D=>{})):T==="translation"?(a.value=p,i.value.model_id=p,y.updateModel(i.value).then(D=>{})):T==="browser-use"&&(m.value=p,f.value.model_id=p,y.updateModel(f.value).then(D=>{}))})}),H(()=>{b.off("default-assistant-setting-save"),b.off("default-topic_naming-setting-save"),b.off("default-translation-setting-save"),b.off("default-model-changed")});const Q={t:c,platform_models:e,assistant_model_number:r,topic_naming_model_number:u,translation_model_number:a,browser_use_model_number:m,assistant_model:l,topic_naming_model:s,translation_model:i,browser_use_model:f,assistantSettingRef:h,topicNamingSettingRef:g,translationSettingRef:P,handleAssistantSetting:R,handleTopicNamingSetting:x,handleTranslationSetting:Z,handleBrowserSetting:ee,get tourDriver(){return U},set tourDriver(S){U=S},step1:V,selectModel:me,assistantSetting:fe,topicNamingSetting:ve,translationSetting:be,ref:_,onMounted:z,onBeforeMount:Y,onUnmounted:H,nextTick:A,get useI18n(){return O},get service(){return y},get emitter(){return b},get message(){return J},get SettingOutlined(){return ie},get driver(){return K}};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}},ye={class:"default-model-container"},Ne={class:"default-item assistant-container"},Oe={class:"item-header item"},ke={class:"item-title"},Te={class:"item-model item"},Ce={class:"assistant setting"},we={class:"item-tips item"},Pe={class:"default-item topic-naming-contianer"},xe={class:"item-header item"},Ue={class:"item-title"},Ie={class:"item-model item"},Le={class:"topic_naming setting"},Je={class:"item-tips item"};function Be(t,n,c,e,r,u){return N(),B(E,null,[M("div",ye,[o(" 助手模型 "),M("div",Ne,[M("div",Oe,[M("p",ke,C(t.$t("setting.defaultModel.defaultAssistantModel")),1)]),M("div",Te,[d(e.selectModel,{class:"select_model",platform_models:e.platform_models,model_choose:e.assistant_model_number,select_type:e.assistant_model.setting_type},null,8,["platform_models","model_choose","select_type"]),M("div",Ce,[d(e.SettingOutlined,{class:"icon",onClick:e.handleAssistantSetting})])]),M("div",we,[M("p",null,C(t.$t("setting.defaultModel.assistantModelTips")),1)])]),o(" 命名模型 "),M("div",Pe,[M("div",xe,[M("p",Ue,C(t.$t("setting.defaultModel.topicNamingModel")),1)]),M("div",Ie,[d(e.selectModel,{class:"select_model",platform_models:e.platform_models,model_choose:e.topic_naming_model_number,select_type:e.topic_naming_model.setting_type},null,8,["platform_models","model_choose","select_type"]),M("div",Le,[d(e.SettingOutlined,{class:"icon",onClick:e.handleTopicNamingSetting})])]),M("div",Je,[M("p",null,C(t.$t("setting.defaultModel.topicNamingModelTips")),1)])]),o(" 翻译模型 "),o('        <div class="default-item translation-contianer">'),o('            <div class="item-header item">'),o(`                <p class="item-title">{{ $t('setting.defaultModel.translationModel') }}</p>`),o("            </div>"),o('            <div class="item-model item">'),o('                <selectModel class="select_model" :platform_models="platform_models"'),o('                    :model_choose="translation_model_number" :select_type="translation_model.setting_type" />'),o('                <div class="translation setting">'),o('                    <SettingOutlined class="icon" @click="handleTranslationSetting" />'),o("                </div>"),o("            </div>"),o('            <div class="item-tips item">'),o("                <p>{{ $t('setting.defaultModel.translationModelTips') }}</p>"),o("            </div>"),o("        </div>"),o('        <div class="default-item browser-use-contianer">'),o('            <div class="item-header item">'),o(`                <p class="item-title">{{ $t('setting.defaultModel.browserUseModel') }}</p>`),o("            </div>"),o('            <div class="item-model item">'),o('                <selectModel class="select_model" :platform_models="platform_models"'),o('                    :model_choose="browser_use_model_number" :select_type="browser_use_model.setting_type" />'),o('                <div class="browser-use setting">'),o('                    <SettingOutlined class="icon" @click="handleTranslationSetting" />'),o("                </div>"),o("            </div>"),o('            <div class="item-tips item">'),o("                <p>{{ $t('setting.defaultModel.browserUseModelTips') }}</p>"),o("            </div>"),o("        </div>")]),d(e.assistantSetting,{ref:"assistantSettingRef","model-value":e.assistant_model},null,8,["model-value"]),d(e.topicNamingSetting,{ref:"topicNamingSettingRef","model-value":e.topic_naming_model},null,8,["model-value"]),d(e.translationSetting,{ref:"translationSettingRef","model-value":e.translation_model},null,8,["model-value"])],64)}const je=L(Se,[["render",Be],["__scopeId","data-v-7c108243"],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/components/defaultModel/index.vue"]]),Re={__name:"defaultModelSetting",setup(t,{expose:n}){n();const c={defaultModel:je};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},De={class:"default-model-service"};function Ae(t,n,c,e,r,u){return N(),B("div",De,[M("h2",null,C(t.$t("setting.defaultModel.DefaultModelSetting")),1),d(e.defaultModel)])}const Qe=L(Re,[["render",Ae],["__scopeId","data-v-43ad5f56"],["__file","/Users/samihalawa/git/PROJECTS_CODING/lemonai/frontend/src/view/setting/defaultModelSetting.vue"]]);export{Qe as default};
