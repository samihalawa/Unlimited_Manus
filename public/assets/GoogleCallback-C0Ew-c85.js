import{q as m,u as _,r as i,v as g,L as f,o as w,f as l,g as v,d as u,l as y,e as n,x as S,S as k,y as x,w as b,z as C,h as p,j as L,t as P}from"./index-DaULH4WC.js";import{s as T}from"./auth-Cw-WJ-gA.js";import"./http-yCFEzgv3.js";import"./user-Bo0KfdR7.js";const U={class:"callback-container"},V={class:"animation-wrapper"},z={key:0,class:"loading-text"},B={__name:"GoogleCallback",setup(G){const{t:r}=_(),d=v(),a=i(0),c=i(!1),h=g(f,{style:{fontSize:"48px",color:"#4f46e5"},spin:!0});return w(async()=>{setTimeout(()=>c.value=!0,300);const t=()=>{a.value<80&&(a.value+=10,setTimeout(t,300))};t();let e;if(window.location.search)e=new URLSearchParams(window.location.search);else{const s=window.location.hash.split("?")[1];e=new URLSearchParams(s)}if(console.log("urlParams:",e.has("code")),e.has("code"))try{const s="http://localhost:5005/api/users/auth/google";console.log("redirectUri",s),await T.googleAuth(e.get("code"),s),a.value=100,l.success(r("auth.loginSuccessful")),setTimeout(()=>d.push({name:"lemon"}),500)}catch(o){l.error(r("auth.loginFailed")+": "+o.message)}}),(t,e)=>{const o=k,s=x;return p(),u("div",U,[y("div",V,[n(o,{size:"large",indicator:S(h),class:"spin-animation"},null,8,["indicator"]),n(s,{percent:a.value,"show-info":!1,"stroke-color":"#4f46e5",class:"progress-bar"},null,8,["percent"])]),n(C,{name:"fade"},{default:b(()=>[c.value?(p(),u("p",z,P(t.$t("Verifying Google Login...")),1)):L("",!0)]),_:1})])}}},j=m(B,[["__scopeId","data-v-b47bee4a"]]);export{j as default};
